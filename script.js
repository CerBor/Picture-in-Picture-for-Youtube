chrome.storage.sync.get({ changeIcon: true }, results => {
	change = results.changeIcon;
});

window.onload = function() {
	array = document.getElementsByTagName('video');
	if (array.length > 0){
		button = document.getElementsByClassName('ytp-pip-button')[0];
		button.style.display = 'inline-block';

		document.addEventListener('fullscreenchange', (event) => {
			if (document.fullscreenElement) {
				button.style.display = 'none';
			}
			else {
				button.style.display = 'inline-block';
			}
		});

		if (change){
			svg = button.children[0];
			svg.innerHTML = "";
			
			svg.setAttribute('version', '1.0');
			svg.setAttribute('width', '40px');
			svg.setAttribute('height', '40px');
			svg.setAttribute('viewBox', "0 0 300.000000 300.000000");

			g = document.createElement('g');
			g.setAttribute('transform', 'translate(60.000000,240.000000) scale(0.100000,-0.100000)');
			g.setAttribute('fill', '#fff');
			g.setAttribute('stroke', 'none');

			path1 = document.createElement('path');
			path1.setAttribute('d', "M1348 1825 c-35 -19 -48 -44 -48 -90 0 -46 23 -81 62 -94 17 -6 88 -11 157 -11 l125 0 -342 -343 -342 -343 0 -51 c0 -45 4 -54 31 -77 22 -19 42 -26 72 -26 41 0 44 3 389 347 l348 348 0 -138 c0 -155 9 -186 59 -207 42 -17 95 -5 121 27 19 25 20 39 20 319 l0 293 -24 28 -24 28 -289 2 c-241 2 -292 0 -315 -12z");
			path2 = document.createElement('path');
			path2.setAttribute('d', "M26 1584 l-26 -27 0 -664 0 -664 25 -24 24 -25 836 0 837 0 29 29 29 29 0 307 c0 325 -3 350 -49 375 -35 18 -87 12 -120 -16 l-31 -26 0 -249 0 -249 -690 0 -690 0 0 515 0 515 411 0 411 0 29 29 c41 41 41 101 0 142 l-29 29 -485 0 -484 0 -27 -26z");
			
			g.appendChild(path1);
			g.appendChild(path2);
			svg.appendChild(g);

			svg.innerHTML += "";
		}
	}
}
